# üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ URL API –¥–ª—è production

## –ü—Ä–æ–±–ª–µ–º–∞

–§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ `localhost:3001`, –Ω–æ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ —Ç–æ–º –∂–µ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å.

## –†–µ—à–µ–Ω–∏–µ

–ö–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç URL API –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—É—â–µ–≥–æ –¥–æ–º–µ–Ω–∞. –ù–æ –µ—Å—Ç—å –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

---

## –í–∞—Ä–∏–∞–Ω—Ç 1: API —á–µ—Ä–µ–∑ Nginx (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ï—Å–ª–∏ Nginx –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ API –Ω–∞ —Ç–æ–º –∂–µ –¥–æ–º–µ–Ω–µ:

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx:

```nginx
server {
    listen 80;
    server_name tech.at-ii.ru;

    # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –∏ SPA
    location / {
        proxy_pass http://localhost:3001;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }

    # API –∑–∞–ø—Ä–æ—Å—ã —Ç–æ–∂–µ —á–µ—Ä–µ–∑ —Ç–æ—Ç –∂–µ –ø—Ä–æ–∫—Å–∏
    location /api {
        proxy_pass http://localhost:3001;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}
```

–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `tech.at-ii.ru/api` (–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å).

---

## –í–∞—Ä–∏–∞–Ω—Ç 2: API –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ä—Ç—É

–ï—Å–ª–∏ API –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞–ø—Ä—è–º—É—é –Ω–∞ –ø–æ—Ä—Ç—É 3001:

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø—Ä–∏ —Å–±–æ—Ä–∫–µ:

**–ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ –ø–µ—Ä–µ–¥ —Å–±–æ—Ä–∫–æ–π:**

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `.env.production`:
```env
VITE_API_URL=https://tech.at-ii.ru:3001
```

–ò–ª–∏ –¥–ª—è HTTP:
```env
VITE_API_URL=http://tech.at-ii.ru:3001
```

–ó–∞—Ç–µ–º —Å–æ–±–µ—Ä–∏ –ø—Ä–æ–µ–∫—Ç:
```bash
npm run build
```

---

## –í–∞—Ä–∏–∞–Ω—Ç 3: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ (—Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)

–ö–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç URL:
- –í **production**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ–∫—É—â–∏–π –¥–æ–º–µ–Ω + –ø–æ—Ä—Ç 3001
- –í **development**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `localhost:3001`

**–ü—Ä–∏–º–µ—Ä:**
- –°–∞–π—Ç: `https://tech.at-ii.ru`
- API: `https://tech.at-ii.ru:3001`

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –∏ –¥–µ–ø–ª–æ—è:

1. –û—Ç–∫—Ä–æ–π —Å–∞–π—Ç: `https://tech.at-ii.ru`
2. –û—Ç–∫—Ä–æ–π –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
3. –ü—Ä–æ–≤–µ—Ä—å Network tab - –∑–∞–ø—Ä–æ—Å—ã –∫ API –¥–æ–ª–∂–Ω—ã –∏–¥—Ç–∏ –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å
4. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ CORS - –ø—Ä–æ–≤–µ—Ä—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞

---

## –ï—Å–ª–∏ –≤—Å—ë —Ä–∞–≤–Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ–≤–µ—Ä—å firewall:
```bash
sudo ufw allow 3001/tcp
```

### –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä —Å–ª—É—à–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö:
```bash
sudo netstat -tlnp | grep 3001
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: 0.0.0.0:3001
```

### –ü—Ä–æ–≤–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API:
```bash
curl http://tech.at-ii.ru:3001/api/data
# –ò–ª–∏
curl http://193.124.114.86:3001/api/data
```

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–õ—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç:** –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Nginx –¥–ª—è –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è API –Ω–∞ —Ç–æ–º –∂–µ –¥–æ–º–µ–Ω–µ. –¢–æ–≥–¥–∞:
- –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å CORS
- –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å –ø–æ—Ä—Ç–∞–º–∏
- –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø–æ—Ä—Ç—ã 80/443
